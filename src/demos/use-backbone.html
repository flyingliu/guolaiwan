<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>使用backbone</title>
  <script src="/src/lib/jquery.js"></script>
  <script src="/src/lib/json2.js"></script>
  <script src="/src/lib/underscore.js"></script>
  <script src="/src/lib/backbone-min.js"></script>
</head>
<body>

<h1>使用backbone</h1>

<script>
    var tom = new Backbone.Model({'name':'tom'});  // 创建学生tom
    var peter = new Backbone.Model({'name':'peter'}); // 创建学生peter

    var students = new Backbone.Collection(); // tom和peter都是学生
    students.add( tom );    // 向Collection中添加学生
    students.add( peter );

    console.log( JSON.stringify(students) ); //[{"name":"tom"},{"name":"peter"}]


    console.log('------------------------')
    var User = Backbone.Model.extend({
    sayHello : function(){  //实例方法
      console.log("hello");
        }
    },
    {
    sayWorld : function(){  //静态方法
      console.log("world");
        }
    });
    var tom = new User; // 创建一个用户
    tom.sayHello(); // 调用用户的实例方法
    User.sayWorld(); // 直接调用Model的静态方法


    console.log('------------------------')
    var User = Backbone.Model.extend({
      defaults : {    // 默认属性，但是子类也会继承
        "name": "tom"
      },
      sayHello : function(){  // 父类的方法
        console.log("hello");
      }
    });
    var ChildUser = User.extend({   // ChildUser 继承自User
      sayChild : function(){  // 子类的方法
        console.log("child");
      }
    }); 
    var child = new ChildUser;  // 创建ChildUser实例
    child.sayHello();    // 子类继承父类sayHello()方法
    child.sayChild();    // 子类自己的方法
    console.log(child.get("name"));  // 子类继承父类属性


    console.log('------------------------')
    var User = Backbone.Model.extend({
      defaults : {
        name : 'tom'  // 默认的名字
      },
      initialize : function(){  //当model创建的时候，调用
        console.log("initialize",this.get('name'));
        this.on('change',function(){  // 当数据发生变化的时候触发
          console.log("此时我的名字是："+this.get("name"));
        });
      }
    });
    var tom = new User;
    setTimeout(function(){
      tom.set('name','jack'); // 修改模型的数据，会被change检测到
    },1000);

    console.log('------------------------')
    var Usera = Backbone.Model.extend({
      defaults : {
        namea : 'toma',   // 默认的名字
        age : 10
      },
      initialize : function(){  //当model创建的时候，调用
        console.log("initialize");
        this.on('change:namea',function(){   // 只检测name的变化
          console.log("此时我的名字是："+this.get("namea"));
        });
      }
    });
    var toma = new Usera;
    toma.set('namea','flying'); // 修改模型的数据，会被change检测到
    toma.set('age','20');// 修改年龄不会被change检测





</script>


</body>
</html>